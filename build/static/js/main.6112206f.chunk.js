(this["webpackJsonpreact-echarts-tutorial"]=this["webpackJsonpreact-echarts-tutorial"]||[]).push([[0],{41:function(e,t,r){"use strict";r.r(t);var a=r(0),c=r.n(a),n=r(17),s=r.n(n),i=r(9),j=r.n(i),l=r(13),o=r(7),u=r(47),d=r(45),b=r(46),h=r(43),p=r(16),O=r(1),x=c.a.createContext();function m(){return Object(a.useContext)(x)}function f(e){var t=e.children,r=Object(a.useState)(),c=Object(o.a)(r,2),n=c[0];c[1];function s(){return(s=Object(l.a)(j.a.mark((function e(t,r,a,c,n){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://cap.gura.ch/api/user/register",e.next=3,fetch("https://cap.gura.ch/api/user/register",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({username:t,password:r,firstname:a,lastname:c,email:n})});case 3:return s=e.sent,e.abrupt("return",s.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return(i=Object(l.a)(j.a.mark((function e(t,r){var a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://cap.gura.ch/api/user/login",e.next=3,fetch("https://cap.gura.ch/api/user/login",{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify({username:t,password:r})});case 3:return a=e.sent,e.abrupt("return",a.json());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var u={currentUser:n,login:function(e,t){return i.apply(this,arguments)},signup:function(e,t,r,a,c){return s.apply(this,arguments)}};return Object(O.jsx)(x.Provider,{value:u,children:t})}function v(){var e=Object(a.useRef)(),t=Object(a.useRef)(),r=Object(a.useRef)(),c=Object(a.useRef)(),n=Object(a.useRef)(),s=m().signup,i=Object(a.useState)(""),x=Object(o.a)(i,2),f=x[0],v=x[1],y=Object(a.useState)(""),g=Object(o.a)(y,2),w=g[0],N=g[1];function k(){return(k=Object(l.a)(j.a.mark((function a(i){var l;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return i.preventDefault(),a.prev=1,v(""),N(""),a.next=6,s(e.current.value,t.current.value,r.current.value,c.current.value,n.current.value);case 6:l=a.sent,console.log(l),l.id?N("Account successfully created"):l.password?v("Weak password"):l.username?v("Username already exists"):l.email&&v("Email already been used"),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),v("Failed to create an account");case 14:case"end":return a.stop()}}),a,null,[[1,11]])})))).apply(this,arguments)}return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(u.a,{children:Object(O.jsxs)(u.a.Body,{children:[Object(O.jsx)("h2",{className:"text-center mb-4",children:"Sign up"}),f&&Object(O.jsx)(d.a,{variant:"danger",children:f}),w&&Object(O.jsx)(d.a,{variant:"success",children:w}),Object(O.jsxs)(b.a,{onSubmit:function(e){return k.apply(this,arguments)},children:[Object(O.jsxs)(b.a.Group,{id:"username",children:[Object(O.jsx)(b.a.Label,{children:"Username"}),Object(O.jsx)(b.a.Control,{type:"username",ref:e,required:!0})]}),Object(O.jsxs)(b.a.Group,{id:"first-name",children:[Object(O.jsx)(b.a.Label,{children:"First Name"}),Object(O.jsx)(b.a.Control,{type:"firstname",ref:r,required:!0})]}),Object(O.jsxs)(b.a.Group,{id:"last-name",children:[Object(O.jsx)(b.a.Label,{children:"Last Name"}),Object(O.jsx)(b.a.Control,{type:"lastname",ref:c,required:!0})]}),Object(O.jsxs)(b.a.Group,{id:"email",children:[Object(O.jsx)(b.a.Label,{children:"Email"}),Object(O.jsx)(b.a.Control,{type:"email",ref:n,required:!0})]}),Object(O.jsxs)(b.a.Group,{id:"password",children:[Object(O.jsx)(b.a.Label,{children:"Password"}),Object(O.jsx)(b.a.Control,{type:"password",ref:t,required:!0})]}),Object(O.jsx)(h.a,{className:"w-100 text",type:"submit",children:"Sign Up"})]})]})}),Object(O.jsxs)("div",{className:"w-100 text-center mt-2",children:["Already have an account? ",Object(O.jsx)(p.b,{to:"/",children:"Log in"})]})]})}var y=r(44),g=r(5);function w(){var e=Object(a.useState)(""),t=Object(o.a)(e,2),r=t[0],c=t[1],n=m(),s=(n.currentUser,n.logout,Object(g.f)());function i(){return(i=Object(l.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c("");try{s("/")}catch(t){c("Failed to log out")}case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(u.a,{children:Object(O.jsxs)(u.a.Body,{children:[Object(O.jsx)("h2",{className:"text-center mb-4",children:"Profile"}),r&&Object(O.jsx)(d.a,{variant:"danger",children:r}),Object(O.jsx)(p.b,{to:"/login",className:"btn btn-primary w-100 mt-3",children:"Add Tracker"})]})}),Object(O.jsx)("div",{className:"w-100 text-center mt-2",children:Object(O.jsx)(h.a,{variant:"link",onClick:function(){return i.apply(this,arguments)},children:"Log Out"})})]})}var N=function(e){var t=Object(a.useRef)(),r=Object(a.useRef)(),c=Object(g.f)(),n=m().login,s=Object(a.useState)(""),i=Object(o.a)(s,2),x=i[0],f=i[1];function v(){return(v=Object(l.a)(j.a.mark((function e(a){var s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,f(""),e.next=5,n(t.current.value,r.current.value);case 5:s=e.sent,console.log(s),"Invalid username/password"==s.details?f("Invalid username/password"):c("/dashboard"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),f("Failed to log in");case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(u.a,{children:Object(O.jsxs)(u.a.Body,{children:[Object(O.jsx)("h2",{className:"text-center mb-4",children:"Log in"}),x&&Object(O.jsx)(d.a,{variant:"danger",children:x}),Object(O.jsxs)(b.a,{onSubmit:function(e){return v.apply(this,arguments)},children:[Object(O.jsxs)(b.a.Group,{id:"username",children:[Object(O.jsx)(b.a.Label,{children:"Username"}),Object(O.jsx)(b.a.Control,{type:"username",ref:t,required:!0})]}),Object(O.jsxs)(b.a.Group,{id:"password",children:[Object(O.jsx)(b.a.Label,{children:"Password"}),Object(O.jsx)(b.a.Control,{type:"password",ref:r,required:!0})]}),Object(O.jsx)(h.a,{className:"w-100",type:"submit",children:"Log In"})]})]})}),Object(O.jsxs)("div",{className:"w-100 text-center mt-2",children:["Need an account? ",Object(O.jsx)(p.b,{to:"/signup",children:"Sign Up"})]}),Object(O.jsx)(u.a,{children:Object(O.jsxs)(u.a.Body,{children:[Object(O.jsx)("h3",{className:"text-center mb-4",children:"Health Care Provider Key"}),Object(O.jsxs)(b.a,{children:[Object(O.jsxs)(b.a.Group,{id:"key",children:[Object(O.jsx)(b.a.Label,{children:"Key"}),Object(O.jsx)(b.a.Control,{type:"key"})]}),Object(O.jsx)(h.a,{onClick:function(){return c("/dashboard")},className:"w-100 text",children:"Log in"})]})]})})]})},k=function(){return Object(O.jsx)(f,{children:Object(O.jsx)(y.a,{className:"d-flex algin-items-center justify-content-center",style:{minHeight:"100vh"},children:Object(O.jsx)("div",{children:Object(O.jsx)(p.a,{children:Object(O.jsxs)(g.c,{children:[Object(O.jsx)(g.a,{path:"/signup",element:Object(O.jsx)(v,{})}),Object(O.jsx)(g.a,{path:"/",element:Object(O.jsx)(N,{})}),Object(O.jsx)(g.a,{path:"/dashboard",element:Object(O.jsx)(w,{})})]})})})})})};r(40);s.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(k,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.6112206f.chunk.js.map